You are editing my Beamer monorepo.
I want the player to explicitly detect when a screen is already linked to another player and show a clear error.

1. Backend: Change /api/player/register to return a specific error code

In backend/services/playerService.registerPlayer:

Before creating a new player, check if the screen already has a player linked.

If yes, return an error response:

{
  "status": "error",
  "code": "PLAYER_ALREADY_REGISTERED",
  "message": "This screen is already linked to another player. Disconnect the current player from the CMS to proceed.",
  "data": {
    "existing_player_id": "<id>"
  }
}


Do NOT throw a raw exception — return a structured error so the frontend can handle it.

2. API route: reflect the new structured error

In the /api/player/register route:

If the service returns { status: "error", code: "PLAYER_ALREADY_REGISTERED" }, then respond with:

return res.status(409).json(serviceResponse);


Use HTTP 409 Conflict.

3. Player app (player-core/apiClient.ts): handle the new error gracefully

In registerPlayer:

After calling fetch and parsing JSON, detect:

if (json.code === "PLAYER_ALREADY_REGISTERED") {
  console.error("Screen already linked to a player:", json.data.existing_player_id);
  throw new Error("Screen already linked to another player. Disconnect it from the CMS.");
}

4. Player UI (player-electron/index.html): show a visible on-screen error

Update the existing showError() function to display this to the technician:

Player Error
Screen already linked to another player.
Please disconnect the player from the Beamer CMS to continue.


This should appear INSTEAD of “Starting player...”.

5. Console logging

When this error occurs, log a detailed message:

Registration failed: screen already linked to player <player_id>.
Action required: Go to CMS → Screen → “Disconnect Player”


This ensures debugging is fast.

Expected Results

If a screen already has a player, registration fails with a clear, explicit error.

The Electron UI shows a human-friendly “Screen already linked” message.

The console logs a detailed technician-friendly diagnostic.

No more silent failures or “Starting player…” freeze.

Please implement all of the above changes.